{"ast":null,"code":"var _jsxFileName = \"/Users/sabinevidal/Documents/Udacity/Text-Tutor/frontend/src/components/TutorView.js\";\nimport React, { Component } from 'react';\nimport '../stylesheets/App.css';\nimport Tutor from './Tutor';\nimport $ from 'jquery';\n\nclass TutorView extends Component {\n  constructor() {\n    super();\n\n    this.getTutors = () => {\n      $.ajax({\n        url: `/tutors?page=${this.state.page}`,\n        //TODO: update request URL\n        type: \"GET\",\n        mode: 'CORS',\n        success: result => {\n          this.setState({\n            tutors: result.tutors,\n            totalTutors: result.total_tutors,\n            subjects: result.subjects,\n            currentSubject: result.current_subject\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load tutors. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.getBySubject = id => {\n      $.ajax({\n        url: `/subjects/${id}/tutors`,\n        //TODO: update request URL\n        type: \"GET\",\n        success: result => {\n          this.setState({\n            tutors: result.tutors,\n            totalTutors: result.total_tutors,\n            currentSubject: result.current_subject\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load tutors. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.tutorAction = id => action => {\n      if (action === 'DELETE') {\n        if (window.confirm('are you sure you want to delete the tutor?')) {\n          $.ajax({\n            url: `/tutors/${id}`,\n            //TODO: update request URL\n            type: \"DELETE\",\n            success: result => {\n              this.getTutors();\n            },\n            error: error => {\n              alert('Unable to load tutors. Please try your request again');\n              return;\n            }\n          });\n        }\n      }\n    };\n\n    this.state = {\n      tutors: [],\n      page: 1,\n      totalTutors: 0,\n      subjects: {},\n      currentSubject: null\n    };\n  }\n\n  componentDidMount() {\n    this.getTutors();\n  }\n\n  selectPage(num) {\n    this.setState({\n      page: num\n    }, () => this.getTutors());\n  }\n\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalTutors / 10);\n\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: i,\n        className: `page-num ${i === this.state.page ? 'active' : ''}`,\n        onClick: () => {\n          this.selectPage(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }, i));\n    }\n\n    return pageNumbers;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tutor-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subjects-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      onClick: () => {\n        this.getTutors();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, \"Subjects\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }, Object.keys(this.state.subjects).map(id => /*#__PURE__*/React.createElement(\"li\", {\n      key: id,\n      onClick: () => {\n        this.getBySubject(id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, this.state.subjects[id], /*#__PURE__*/React.createElement(\"p\", {\n      className: \"subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, this.state.subjects[id]))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tutors-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, \"Tutors\"), this.state.tutors.map((t, ind) => /*#__PURE__*/React.createElement(Tutor, {\n      key: t.id,\n      name: t.name,\n      phone: t.phone,\n      email: t.email,\n      classes: this.state.subjects[t.classes],\n      tutorAction: this.tutorAction(t.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, this.createPagination())));\n  }\n\n}\n\nexport default TutorView;","map":{"version":3,"sources":["/Users/sabinevidal/Documents/Udacity/Text-Tutor/frontend/src/components/TutorView.js"],"names":["React","Component","Tutor","$","TutorView","constructor","getTutors","ajax","url","state","page","type","mode","success","result","setState","tutors","totalTutors","total_tutors","subjects","currentSubject","current_subject","error","alert","getBySubject","id","tutorAction","action","window","confirm","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","render","Object","keys","map","t","ind","name","phone","email","classes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport '../stylesheets/App.css';\nimport Tutor from './Tutor';\nimport $ from 'jquery';\n\nclass TutorView extends Component {\n  constructor(){\n    super();\n    this.state = {\n      tutors: [],\n      page: 1,\n      totalTutors: 0,\n      subjects: {},\n      currentSubject: null,\n    }\n  }\n\n  componentDidMount() {\n    this.getTutors();\n  }\n\n  getTutors = () => {\n    $.ajax({\n      url: `/tutors?page=${this.state.page}`, //TODO: update request URL\n      type: \"GET\",\n      mode: 'CORS',\n      success: (result) => {\n        this.setState({\n          tutors: result.tutors,\n          totalTutors: result.total_tutors,\n          subjects: result.subjects,\n          currentSubject: result.current_subject })\n        return;\n      },\n      error: (error) => {\n        alert('Unable to load tutors. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  selectPage(num) {\n    this.setState({page: num}, () => this.getTutors());\n  }\n\n  createPagination(){\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalTutors / 10)\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push(\n        <span\n          key={i}\n          className={`page-num ${i === this.state.page ? 'active' : ''}`}\n          onClick={() => {this.selectPage(i)}}>{i}\n        </span>)\n    }\n    return pageNumbers;\n  }\n\n  getBySubject= (id) => {\n    $.ajax({\n      url: `/subjects/${id}/tutors`, //TODO: update request URL\n      type: \"GET\",\n      success: (result) => {\n        this.setState({\n          tutors: result.tutors,\n          totalTutors: result.total_tutors,\n          currentSubject: result.current_subject })\n        return;\n      },\n      error: (error) => {\n        alert('Unable to load tutors. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  // submitSearch = (searchTerm) => {\n  //   $.ajax({\n  //     url: `/tutors/search`, //TODO: update request URL\n  //     type: \"POST\",\n  //     dataType: 'json',\n  //     contentType: 'application/json',\n  //     data: JSON.stringify({searchTerm: searchTerm}),\n  //     xhrFields: {\n  //       withCredentials: true\n  //     },\n  //     crossDomain: true,\n  //     success: (result) => {\n  //       this.setState({\n  //         tutors: result.tutors,\n  //         totalTutors: result.total_tutors,\n  //         currentSubject: result.current_subject })\n  //       return;\n  //     },\n  //     error: (error) => {\n  //       alert('Unable to load tutors. Please try your request again')\n  //       return;\n  //     }\n  //   })\n  // }\n\n  tutorAction = (id) => (action) => {\n    if(action === 'DELETE') {\n      if(window.confirm('are you sure you want to delete the tutor?')) {\n        $.ajax({\n          url: `/tutors/${id}`, //TODO: update request URL\n          type: \"DELETE\",\n          success: (result) => {\n            this.getTutors();\n          },\n          error: (error) => {\n            alert('Unable to load tutors. Please try your request again')\n            return;\n          }\n        })\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"tutor-view\">\n        <div className=\"subjects-list\">\n          <h2 onClick={() => {this.getTutors()}}>Subjects</h2>\n          <ul>\n            {Object.keys(this.state.subjects).map((id, ) => (\n              <li key={id} onClick={() => {this.getBySubject(id)}}>\n                {this.state.subjects[id]}\n                <p className=\"subject\">{this.state.subjects[id]}</p>\n              </li>\n            ))}\n          </ul>\n          {/* <Search submitSearch={this.submitSearch}/> */}\n        </div>\n        <div className=\"tutors-list\">\n          <h2>Tutors</h2>\n          {this.state.tutors.map((t, ind) => (\n            <Tutor\n              key={t.id}\n              name={t.name}\n              phone={t.phone}\n              email={t.email}\n              classes={this.state.subjects[t.classes]}\n              tutorAction={this.tutorAction(t.id)}\n            />\n          ))}\n          <div className=\"pagination-menu\">\n            {this.createPagination()}\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default TutorView;\n"]},"metadata":{},"sourceType":"module"}